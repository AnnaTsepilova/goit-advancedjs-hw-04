{"version":3,"file":"commonHelpers.js","sources":["../src/js/api-service.js","../src/js/render-gallery.js","../src/js/notifications.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '37887281-69a6e413b8501c16bd9004fb8';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchParams = new URLSearchParams({\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: '40',\n});\n\nexport default async function fetchImages(searchQuery, page = 1) {\n  const response = await axios.get(\n    `${BASE_URL}?key=${API_KEY}&q=${searchQuery}&${searchParams}&page=${page}`\n  );\n  return response.data;\n}\n","export default function renderGallery(images) {\n  return images.hits\n    .map(image => {\n      return `            \n            <div class=\"photo-card gallery__item\">\n                <a class=\"gallery__link\" href=\"${image.largeImageURL}\">\n                    <img class=\"gallery__image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                    <div class=\"info\">\n                        <p class=\"info-item\">\n                        <b>Likes</b> ${image.likes}\n                        </p>\n                        <p class=\"info-item\">\n                        <b>Views</b> ${image.views}\n                        </p>\n                        <p class=\"info-item\">\n                        <b>Comments</b> ${image.comments}\n                        </p>\n                        <p class=\"info-item\">\n                        <b>Downloads</b> ${image.downloads}\n                        </p>\n                    </div>\n                </a>\n            </div>\n            `;\n    })\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet isClosed = true;\n\nexport default function notificationMessage(type, images = 0) {\n  isClosed = false;\n  switch (type) {\n    case 'error':\n      errorMessage();\n      break;\n    case 'warningSQ':\n      warningSQmessage();\n      break;\n    case 'warningEnd':\n      warningEndMessage();\n      break;\n    case 'success':\n      successMessage(images);\n      break;\n\n    default:\n      break;\n  }\n}\n\nfunction errorMessage() {\n  iziToast.show({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again.',\n    position: 'topRight',\n    color: 'red',\n  });\n}\n\nfunction warningSQmessage() {\n  iziToast.show({\n    title: 'Warning',\n    message: 'Please enter your search query.',\n    position: 'topRight',\n    color: 'yellow',\n  });\n}\n\nfunction warningEndMessage() {\n  iziToast.show({\n    title: 'Warning',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n    color: 'yellow',\n  });\n}\n\nfunction successMessage(images) {\n  iziToast.show({\n    title: 'Success',\n    message: `Hooray! We found  ${images.totalHits} images.`,\n    position: 'topRight',\n    color: 'green',\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport fetchImages from './js/api-service.js';\nimport renderGallery from './js/render-gallery.js';\n\nimport notificationMessage from './js/notifications.js';\n\nconst inputRef = document.querySelector('.search-form input');\nconst searchForm = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nlet page = 1;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  window.scrollTo(0, 0);\n  page = 1;\n  const searchQuery = inputRef.value.trim().toLowerCase();\n\n  if (searchQuery === '') {\n    notificationMessage('warningSQ');\n    cleanOutput();\n    return;\n  }\n\n  try {\n    const images = await fetchImages(searchQuery);\n\n    if (images.hits.length === 0) {\n      loadMoreBtn.classList.add('is-hidden');\n      notificationMessage('error');\n      cleanOutput();\n      return;\n    }\n\n    toggleLoadMoreBtn(images);\n\n    notificationMessage('success', images);\n    galleryContainer.innerHTML = renderGallery(images);\n    gallery.refresh();\n  } catch (error) {\n    onFetchError(error);\n  }\n}\n\nasync function onLoadMore() {\n  const searchQuery = inputRef.value.toLowerCase();\n\n  if (!searchQuery) {\n    notificationMessage('warningSQ');\n    cleanOutput();\n    return;\n  }\n  page += 1;\n\n  const images = await fetchImages(searchQuery, page);\n\n  toggleLoadMoreBtn(images);\n\n  if (images.hits.length === 0) {\n    notificationMessage('warningEnd');\n    return;\n  }\n  const renderedGallery = renderGallery(images);\n  galleryContainer.insertAdjacentHTML('beforeend', renderedGallery);\n\n  gallery.refresh();\n\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction toggleLoadMoreBtn(images) {\n  if (images.hits.length < 40) {\n    loadMoreBtn.classList.add('is-hidden');\n    notificationMessage('warningEnd');\n  } else {\n    loadMoreBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction onFetchError(error) {\n  cleanOutput();\n  notificationMessage('error');\n  console.log(error);\n}\n\nfunction cleanOutput() {\n  galleryContainer.innerHTML = '';\n}\n"],"names":["API_KEY","BASE_URL","searchParams","fetchImages","searchQuery","page","axios","renderGallery","images","image","notificationMessage","type","errorMessage","warningSQmessage","warningEndMessage","successMessage","iziToast","inputRef","searchForm","galleryContainer","loadMoreBtn","gallery","SimpleLightbox","onSearch","onLoadMore","event","cleanOutput","toggleLoadMoreBtn","error","onFetchError","renderedGallery","cardHeight"],"mappings":"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"}